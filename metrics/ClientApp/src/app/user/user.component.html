<div class="user">
  <kendo-grid selectable="'multiple'" (dataStateChange)="fetch()" [loading]="loading" [pageSize]="state.take" [pageable]="true" [data]="data" [skip]="state.skip">
    <ng-template position="top" kendoGridToolbarTemplate>
      <form class="k-form row" #form="ngForm" novalidate>
        <div class="k-form-field col">
          <kendo-combobox name="UserId" [(ngModel)]="userId" [allowCustom]="true" [textField]="'FullName'" [valueField]="'UserId'" [data]="users">
            <ng-template kendoComboBoxItemTemplate let-dataItem>
              <img class="img-responsive" [src]="dataItem.Avatar"/>{{ dataItem.FullName }}
            </ng-template>
          </kendo-combobox>
          <kendo-textbox-container id="Search" floatingLabel="Поиск">
            <input kendoTextBox name="Search" [(ngModel)]="search" class="k-textbox" />
          </kendo-textbox-container>
          <button [disabled]="!form.valid" (click)="handleSearch()" [icon]="'search'" kendoButton [primary]="true" type="submit">Получить</button>
        </div>

        <button kendoButton [primary]="true">Репост всего</button>
      </form>
    </ng-template>
    <kendo-grid-column>
      <ng-template kendoGridCellTemplate let-dataItem>
        <div class="card small">
          <div class="card-header">
            <h4 class="card-title">
              <a target="_blank" href="https://vk.com//wall{{dataItem.Owner_Id}}_{{dataItem.Id}}">Пост</a>
            </h4>
            <span class="card-subtitle">{{dataItem.Date | unixtime | kendoDate: 'G' }}</span>
          </div>
          <div class="card-body">
            <div class="card-image">
              <app-message-image [attachments]="dataItem.Attachments"></app-message-image>
            </div>
            <div class="card-text">
              {{dataItem.Text}}
            </div>
          </div>
          <div class="card-footer">
            <a title="Репост" kendoTooltip class="text-primary k-icon k-i-fav-outline" (click)="repost(dataItem.Owner_Id, dataItem.Id, $event.currentTarget)">
            </a>
          </div>
        </div>
      </ng-template>
    </kendo-grid-column>
  </kendo-grid>
</div>
